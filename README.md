# 들어가며

다양한 방법으로 도커를 다루는 방법(도커가 해결하는 문제, 로컬 머신에서 도커 다루기, 프로젝트 규모별 배포 전략)과 쿠버네티스와 연결하기, 그것이 왜 필요한지 배우는 강의입니다.

---

# Docker란?

**컨테이너**를 생성하고 관리하기 위한 도구입니다.

#### 컨테이너란?

애플리케이션과 그 실행에 필요한 모든 환경(코드, 라이브러리, 설정 파일 등)을 패키징하여 독립적으로 실행할 수 있도록 해주는 경량 가상화 기술입니다.
상대 개념으로는 가상머신(VM)이라는 게 있습니다.

---

# Docker와 Container는 왜 필요할까요?

배운 내용을 토대로 질문을 수정해보겠습니다.
"우리는 왜 소프트웨어 개발에서 독립적인, 표준화된 어플리케이션 패키지를 필요로 할까요?"

로컬 환경과 배포되어있는 서버 환경의 버전을 동일하게 유지하는 것이 상당한 가치를 가지고 있는데요, 예시와 함께 살펴보면 좋을 것 같아요.

우리는 NodeJS 기반 애플리케이션을 개발했습니다. 새로운 버전에서 지원하는 기능을 사용해 버전 업데이트 후 새롭게 배포했어요. 하지만 배포 서버에는 해당 NodeJS 버전이 포함되어 있지 않아 로컬에서는 작동하는 코드가 실제 서버에서는 동작하지 않는 상황이 생겨요.

이는 무엇이 잘못되어있는지, 문제가 무엇인지 파악하는데 상당한 시간이 걸릴 수 있습니다.
즉, **개발 환경과 운영 환경을 통일하는 것은 상당한 가치가 있다는 것을 의미**합니다.

도커와 컨테이너는 이런 상황에 도움을 줍니다.
특정 노드 버전을 도커 컨테이너에 고정해 코드가 항상 같은 버전에서 실행되도록 할 수 있습니다.

---

# Doker, Container 그리고 가상 머신

가상 머신(VM)으로 도커와 같은 문제를 해결할 수 있습니다.

### VM이란?

호스트 OS 위에 별도의 가상 운영 채제(OS)를 실행하는 방식입니다. 컴퓨터 내부의 또 다른 컴퓨터를 만드는 것과 같습니다. 여기에는 몇가지 문제점이 존재합니다.

1. 리소스가 낭비될 수 있습니다.
   1. VM마다 독립적인 OS를 포함합니다. 이는 메모리, CPU, 디스크 공간을 차지하게 됩니다.
   2. 즉, 여러개의 VM을 실행하면 중복된 OS 설치로 공간 낭비를 할 수 있습니다.
2. 부팅 속도가 느립니다.
   1. OS부팅 시간이 필요해 실행 속도가 느리며 호스트 OS 위에서 추가적인 VM을 실행하므로 성능 저하 우려가 있습니다.
3. 운영 및 배포의 비효율성
   1. VM은 이미지의 크기가 커서 공유 및 배포가 어렵고, 설정이 복잡합니다.
   2. 동료 개발자, 또는 프로덕션 환경과 완전히 동일한 환경을 구축하기 어렵습니다.

### VM 대비 Container의 장점

1. Container는 별도의 OS 부팅이 없어 실행이 빠릅니다.
2. 호스트 OS의 커널을 공유하기에 추가 OS설치가 필요 없습니다.
3. 일관된 환경 공유
   1. 컨테이너는 라이브러리, 런타임만 포함하여 불필요한 요소를 제거합니다.
   2. 동일한 컨테이너 이미지를 사용하면 어느 환경에서나 같은 실행 환경을 유지합니다.
4. 손쉬운 배포 및 공유
   1. Dokerfile을 통해 환경을 코드로 정의하고 공유가 가능합니다.
   2. 컨테이너 이미지를 생성하여 팀원 및 서버에 쉽게 배포가 가능합니다.

### 컨테이너 vs VM 비교

| 비교 항목            | **버츄얼 머신(VM)**            | **도커 컨테이너**                    |
| -------------------- | ------------------------------ | ------------------------------------ |
| **운영 방식**        | 하이퍼바이저 위에 OS 실행      | 호스트 OS의 커널을 공유              |
| **속도**             | 느림 (OS 부팅 필요)            | 빠름 (몇 초 이내 실행)               |
| **리소스 사용량**    | 높음 (VM마다 OS 포함)          | 낮음 (OS 공유)                       |
| **디스크 공간**      | 수 GB 이상                     | 수 MB ~ 수백 MB                      |
| **일관된 실행 환경** | 동일한 VM 이미지를 공유해야 함 | Dockerfile로 손쉽게 환경 정의 가능   |
| **배포 및 이동성**   | VM 이미지는 크고 이동이 어려움 | 컨테이너 이미지는 가볍고 배포가 쉬움 |

## 일반적인 소프트웨어 개발 및 배포 환경에서는 도커와 컨테이너가 효율적입니다.
